区块链的核心-共识机制

## 加密算法

### 对称加密算法

什么是对称？加密解密都是用同一套密钥



### 非对称加密算法

私钥，公钥

- 一对两把密钥，分别用于**加密、解密(公开、私有)**
- RSA算法；大整数分解；ECC算法；椭圆曲线
- 破解228比特的RSA密钥需要的能量可煮沸一茶匙的水，而破解228比特的ECC密钥需要的能量能煮沸地球上所有的水

## 常用加密算法-哈希函数

![image-20231014121138504](assets\image-20231014121138504.png)

无论大信息小信息，都会生成对应的ID（固定长度？



## 私钥、公钥、地址、签名

一般转账不用公钥，直接打给地址

![image-20231014121437808](assets\image-20231014121437808.png)

私钥是随机选出的32字节数字，通过非对称加密(圆曲线函数)

产生一个公钥公钥再通过哈希函数转化成比特币地址，接受转账等

公钥、地址、交易全网公开，但是背后关联的用户、身份信息完全匿名



## 梅克尔树

![image-20231014121549114](assets\image-20231014121549114.png)



## 共识

共识是对某事达成的共同看法

区块链中，共识是分布式的记账者群体对账本记录的交易达成一致



## 分布式系统的一致性问题

**分布式系统的共识问题-拜占庭问题**

![image-20231014121952473](assets\image-20231014121952473.png)

![image-20231014122042305](assets\image-20231014122042305.png)



## 分布式系统共识机制

![image-20231014122356634](assets\image-20231014122356634.png)

## 比特币共识机制特点

![image-20231014122503950](assets\image-20231014122503950.png)

### 工作量证明PoW

- 哈希函数:将任意长度的输入映射为固定长度的输出，输出值不可预测
  - ​	特性:碰撞阻力，隐秘性，迷题友好找
- 到结果需要高难度的计算，但是找到了正确结果后容易验证
- 比特币使用的哈希函数:SHA256

- 激励机制：区块奖励+手续费
- 随机性：哈希函数
- 抵女巫攻击：算力
- 代表：BTC, LTC, ETH1.0

### Pos权益证明

简单来说是用锁定的代币的数量来代替算力，作为挖矿权重，锁定的代币越多，挖矿概率越大

S解决的是抗女巫攻击，我不能创小号来增加我的概率

![image-20231014123250724](assets\image-20231014123250724.png)

用函数生成随机数

但VDF，VRF不是真随机，但是很难操控，不可预测

### DPoS

![image-20231014123441992](assets\image-20231014123441992.png)



![image-20231014123458049](assets\image-20231014123458049.png)



